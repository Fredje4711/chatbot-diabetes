<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Diabetes Chatbot â€“ Testpagina</title>

    <style>
      /* --- ALGEMENE STYLING & LANDINGSPAGINA LOOK --- */
      body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; margin: 0; padding: 0; background-color: #f9f9f9; }
      
      .page-header {
        background-color: #007bff;
        color: white;
        text-align: center;
        padding: 25px 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .header-content h1 {
        margin: 0;
        font-size: 2em;
      }
      .header-content p {
        margin: 5px 0 0;
        font-size: 1.1em;
        opacity: 0.9;
      }

      .intro-content { 
        max-width: 800px;
        margin: 40px auto;
        padding: 20px; 
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        line-height: 1.7; 
      }
      .intro-content h1 { color: #0056b3; font-size: 1.8em; }
      .intro-content h2 { border-bottom: 2px solid #eee; padding-bottom: 5px; margin-top: 30px; }
      .intro-content code { background-color: #e9e9eb; padding: 3px 7px; border-radius: 4px; font-family: monospace; }
      .intro-content ol, .intro-content ul { padding-left: 20px; }

      /* --- CHATBOT STYLING --- */
      #chatbot-button { position: fixed; bottom: 20px; right: 20px; background-color: #007bff; color: white; border-radius: 50%; width: 60px; height: 60px; font-size: 28px; text-align: center; line-height: 60px; cursor: pointer; z-index: 1000; }
      #chatbot-container { position: fixed; bottom: 90px; right: 20px; width: 350px; max-height: 500px; border: 1px solid #ccc; border-radius: 10px; background-color: white; display: flex; flex-direction: column; box-shadow: 0 0 10px rgba(0,0,0,0.1); z-index: 1000; }
      #chatbot-header { background-color: #007bff; color: white; padding: 10px; font-weight: bold; text-align: center; border-top-left-radius: 10px; border-top-right-radius: 10px; }
      #chat-box { flex: 1; padding: 10px; overflow-y: auto; font-size: 14px; }
      #chatbot-input-area { display: flex; border-top: 1px solid #ccc; }
      #chat-input { flex: 1; border: none; padding: 10px; font-size: 14px; }
      #chatbot-send { background-color: #007bff; color: white; border: none; padding: 0 16px; cursor: pointer; }
      
      .message { display: flex; align-items: flex-start; margin: 10px 0; max-width: 85%; line-height: 1.4; }
      .message div { padding: 10px 12px; border-radius: 18px; word-wrap: break-word; }
      .message .icon { width: 32px; height: 32px; flex-shrink: 0; margin-right: 8px; display: flex; align-items: center; justify-content: center; font-size: 24px; border-radius: 50%; overflow: hidden; }
      .message .icon img { width: 100%; height: 100%; object-fit: cover; }
      .user-message { margin-left: auto; flex-direction: row-reverse; }
      .user-message .icon { margin-left: 8px; margin-right: 0; }
      .user-message div { background-color: #dcf8c6; border-bottom-right-radius: 4px; }
      .assistant-message { margin-right: auto; }
      .assistant-message div { background-color: #f1f0f0; border-bottom-left-radius: 4px; }
      .loader { border: 2px solid #f3f3f3; border-top: 2px solid #3498db; border-radius: 50%; width: 4px; height: 4px; animation: spin 1.5s linear infinite; margin: 4px; }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
      
      @media (max-width: 480px) { #chatbot-container { width: 90%; left: 5%; right: 5%; } }
	  
      #chatbot-downloads-area { padding: 8px 10px; border-top: 1px solid #ccc; background-color: #f8f9fa; }
      #chatbot-downloads-area label { display: block; font-size: 12px; font-weight: bold; margin-bottom: 4px; color: #555; }
      #downloads-select { width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ccc; font-size: 13px; }

      /* Styling voor de nieuwe help-knop */
      #chatbot-help-btn {
        background-color: #f1f0f0;
        color: #555;
        border: none;
        border-left: 1px solid #ccc;
        padding: 0 12px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
      }
      #chatbot-help-btn:hover {
        background-color: #e9e9eb;
      }
    </style>
</head>
<body>

  <header class="page-header">
    <div class="header-content">
      <h1>Diabetes Liga Midden-Limburg</h1>
      <p>Een Assistent voor informatie en ondersteuning</p>
    </div>
  </header>

  <main class="intro-content">
    <p>Dit is de eerste werkende DLML chatbot versie. Het is voorlopig nog een probeersel in ontwikkeling wat eventueel in de toekomst nuttig kan zijn als bijkomende vorm van communicatie.</p>
    <h2>Hoe werkt deze chatbot?</h2>
    <ol>
      <li><strong>Eerst zoekt hij in onze eigen info:</strong> Ik heb wat DLML-gegevens toegevoegd over onze activiteiten en het bestuur, samen met de Q&A data over diabetes die ik reeds had.</li>
      <li><strong>Daarna gebruikt hij zijn algemene kennis:</strong> Als hij het antwoord niet in de toegevoegde info vindt, zal hij proberen de vraag te beantwoorden met zijn algemene kennis.</li>
      <li><strong>Als niets lukt, geeft hij dat eerlijk toe:</strong> Vindt hij nergens een antwoord, dan geeft hij een standaardmelding met een doorverwijzing.</li>
    </ol>
    <p><em>Belangrijk om te weten:</em> Omdat ik gebruik maak van een gratis opzet, heeft de chatbot zijn beperkingen. Hij kan bijvoorbeeld niet live op het internet zoeken in websites (een betalende functie). Desondanks verwacht ik dat hij het overgrote deel van de vragen over diabetes en DLML correct kan beantwoorden.</p>
    <h2>Wat kunnen jullie testen?</h2>
    <p>Probeer gerust verschillende soorten vragen om te zien hoe hij reageert:</p>
    <ul>
      <li><strong>Vragen over onze activiteiten:</strong><br><em>Voorbeeld:</em> <code>Wat is er te doen in december.</code> of <code>Geef alle info over de Herkenrode wandeling.</code></li>
      <li><strong>Vragen over het bestuur:</strong><br><em>Voorbeeld:</em> <code>Geef alle bestuursleden.</code> of <code>Wie is Guido Smets.</code></li>
      <li><strong>Vragen over diabetes (uit de kennisbank):</strong><br><em>Voorbeeld:</em> <code>Moet mijn voorlopig rijbewijs aangepast worden.</code> of <code>Is diabetes te genezen.</code></li>
      <li><strong>Algemene kennisvragen:</strong><br><em>Voorbeeld:</em> <code>Wat is de hoofdstad van Canada.</code></li>
    </ul>
    <h2>Jullie feedback.</h2>
    <p>Na het testen hoor ik graag jullie feedback. Let vooral op de volgende zaken:</p>
    <ul>
      <li><strong>Foute of onvolledige antwoorden:</strong> Vond je een vraag waarop de chatbot duidelijk verkeerd antwoordde? Geef de exacte vraag aan mij door!</li>
      <li><strong>Niet-gevonden antwoorden:</strong> Stelde je een vraag waarvan je vindt dat het antwoord in onze kennisbank zou moeten zitten, maar kreeg je een "ik weet het niet"-melding?</li>
      <li><strong>Gebruiksgemak:</strong> Is de chatbot makkelijk in gebruik? Is de opmaak duidelijk? Alle suggesties zijn welkom.</li>
    </ul>
    <p>Alvast bedankt voor het testen!</p>
  </main>

  <!-- De chatbot-elementen -->
  <div id="chatbot-button">ðŸ’¬</div>
  <div id="chatbot-container" style="display:none;">
    <div id="chatbot-header">Hulp & Info Diabetes</div>
    <div id="chat-box"></div>
    <div id="chatbot-downloads-area">
      <label for="downloads-select">Of selecteer een presentatie:</label>
      <select id="downloads-select">
        <option value="">-- Kies een download --</option>
      </select>
    </div>
    <div id="chatbot-input-area">
      <input type="text" id="chat-input" placeholder="Typ je vraag..." />
      <button id="chatbot-help-btn">?</button>
      <button id="chatbot-send" onclick="sendMessage()">â–¶</button>
    </div>
  </div>

  <!-- De scripts -->
  <script src="chatbot.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      
      // --- LOGICA VOOR DE AFROLLIJST ---
      async function populateDownloads() {
        try {
          const response = await fetch('downloads_menu.json');
          const downloads = await response.json();
          const selectElement = document.getElementById('downloads-select');
          downloads.forEach(download => {
            const option = document.createElement('option');
            option.value = download.link;
            option.textContent = download.title;
            selectElement.appendChild(option);
          });
          selectElement.addEventListener('change', function() {
            if (this.value) {
              window.open(this.value, '_blank');
              this.selectedIndex = 0;
            }
          });
        } catch (error) {
          console.error('Fout bij het laden van de downloads:', error);
          const selectElement = document.getElementById('downloads-select');
          selectElement.innerHTML = '<option>Kon downloads niet laden.</option>';
        }
      }
      populateDownloads();

      // --- NIEUWE CODE VOOR DE HELP KNOP ---
      document.getElementById("chatbot-help-btn").addEventListener("click", function() {
        const chatBox = document.getElementById("chat-box");
        const helpText = `Hallo! Ik ben de AI Assistent van de Diabetes Liga Midden-Limburg. U kunt mij vragen stellen over:
<br>- Onze activiteiten en infosessies
<br>- Contactgegevens van het bestuur
<br>- Algemene onderwerpen over diabetes
<br>
<br>Als ik het antwoord niet weet in mijn eigen documenten, probeer ik het met mijn algemene kennis. Ik ben een computerprogramma en kan geen medisch advies geven.`;

        const helpMessage = document.createElement("div");
        helpMessage.className = "message assistant-message";
        helpMessage.innerHTML = `<span class="icon"><img src="logo.png" alt="Bot icon"></span><div>${helpText}</div>`;
        chatBox.appendChild(helpMessage);
        chatBox.scrollTop = chatBox.scrollHeight;
      });

      // --- BESTAANDE CODE VOOR DE ANDERE KNOPPEN ---
      document.getElementById("chatbot-button").addEventListener("click", function () {
        const venster = document.getElementById("chatbot-container");
        venster.style.display = venster.style.display === "none" ? "flex" : "none";
      });
      document.getElementById("chat-input").addEventListener("keydown", function (e) {
        if (e.key === "Enter") sendMessage();
      });
    });
  </script>

</body>
</html>